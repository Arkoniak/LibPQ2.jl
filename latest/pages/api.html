<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · LibPQ.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>LibPQ.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Home</a></li><li class="current"><a class="toctext" href="api.html">API</a><ul class="internal"></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="api.html">API</a></li></ul><a class="edit-page" href="https://github.com/invenia/LibPQ.jl/blob/master/docs/src/pages/api.md#L{line}"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>API</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="LibPQ-API-1" href="#LibPQ-API-1">LibPQ API</a></h1><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.Connection" href="#LibPQ.Connection"><code>LibPQ.Connection</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">type Connection</code></pre><p>A connection to a PostgreSQL database.</p><p><strong>Fields:</strong></p><ul><li><p><code>conn</code></p><p>A pointer to a libpq PGconn object (C_NULL if closed)</p></li><li><p><code>closed</code></p><p>True if the connection is closed and the PGconn object has been cleaned up</p></li><li><p><code>encoding</code></p><p>libpq client encoding (string encoding of returned data)</p></li><li><p><code>uid_counter</code></p><p>Integer counter for generating connection-level unique identifiers</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL41-L49">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.Connection-Tuple{AbstractString}" href="#LibPQ.Connection-Tuple{AbstractString}"><code>LibPQ.Connection</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">Connection(str::AbstractString; throw_error=true) -&gt; Connection</code></pre><p>Create a <code>Connection</code> from a connection string as specified in the PostgreSQL documentation (<a href="https://www.postgresql.org/docs/10/static/libpq-connect.html#LIBPQ-CONNSTRING">33.1.1. Connection Strings</a>).</p><p>See <a href="api.html#LibPQ.handle_new_connection-Tuple{LibPQ.Connection}"><code>handle_new_connection</code></a> for information on the <code>throw_error</code> argument.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL88-L95">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.Result" href="#LibPQ.Result"><code>LibPQ.Result</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">type Result &lt;: DataStreams.Data.Source</code></pre><p>A result from a PostgreSQL database query</p><p><strong>Fields:</strong></p><ul><li><p><code>result</code></p><p>A pointer to a libpq PGresult object (C_NULL if cleared)</p></li><li><p><code>cleared</code></p><p>True if the PGresult object has been cleaned up</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL460-L468">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.Result-Tuple{Ptr{Void}}" href="#LibPQ.Result-Tuple{Ptr{Void}}"><code>LibPQ.Result</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">Result(result::Ptr{libpq_c.PGresult}) -&gt; Result</code></pre><p>Construct a <code>Result</code> from a <code>libpg_c.PGresult</code></p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL484-L488">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.Statement" href="#LibPQ.Statement"><code>LibPQ.Statement</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">struct Statement</code></pre><p>A PostgreSQL prepared statement</p><p><strong>Fields:</strong></p><ul><li><p><code>jl_conn</code></p><p>A <code>Connection</code> for which this statement is valid. It may become invalid if the connection is reset.</p></li></ul><ul><li><p><code>name</code></p><p>An autogenerated neame for the prepared statement (using <a href="api.html#LibPQ.unique_id"><code>unique_id</code></a></p></li><li><p><code>description</code></p><p>A <code>Result</code> containing a description of the prepared statement</p></li><li><p><code>num_params</code></p><p>The number of parameters accepted by this statement according to <code>description</code></p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL684-L692">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.column_name-Tuple{LibPQ.Result,Integer}" href="#LibPQ.column_name-Tuple{LibPQ.Result,Integer}"><code>LibPQ.column_name</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">column_name(jl_result::Result, column_number::Integer) -&gt; String</code></pre><p>Return the name of the column at index <code>column_number</code> (1-based).</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL651-L655">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.column_name-Tuple{LibPQ.Statement,Integer}" href="#LibPQ.column_name-Tuple{LibPQ.Statement,Integer}"><code>LibPQ.column_name</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">column_name(jl_result::Result, column_number::Integer) -&gt; String</code></pre><p>Return the name of the column at index <code>column_number</code> (1-based) that would be returned by executing the prepared statement.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL754-L759">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.column_names-Tuple{LibPQ.Result}" href="#LibPQ.column_names-Tuple{LibPQ.Result}"><code>LibPQ.column_names</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">column_names(jl_result::Result, column_number::Integer) -&gt; Vector{String}</code></pre><p>Return the names of all the columns in the query result.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL661-L665">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.column_names-Tuple{LibPQ.Statement}" href="#LibPQ.column_names-Tuple{LibPQ.Statement}"><code>LibPQ.column_names</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">column_names(jl_result::Result, column_number::Integer) -&gt; Vector{String}</code></pre><p>Return the names of all the columns in the query result that would be returned by executing the prepared statement.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL764-L769">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.column_number-Tuple{LibPQ.Result,AbstractString}" href="#LibPQ.column_number-Tuple{LibPQ.Result,AbstractString}"><code>LibPQ.column_number</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">column_number(jl_result::Result, column_name::AbstractString) -&gt; Int</code></pre><p>Return the index (1-based) of the column named <code>column_name</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL670-L674">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.column_number-Tuple{LibPQ.Statement,AbstractString}" href="#LibPQ.column_number-Tuple{LibPQ.Statement,AbstractString}"><code>LibPQ.column_number</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">column_number(jl_result::Result, column_name::AbstractString) -&gt; Int</code></pre><p>Return the index (1-based) of the column named <code>column_name</code> that would be returned by executing the prepared statement.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL772-L777">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.encoding-Tuple{LibPQ.Connection}" href="#LibPQ.encoding-Tuple{LibPQ.Connection}"><code>LibPQ.encoding</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">encoding(jl_conn::Connection) -&gt; String</code></pre><p>Return the client encoding name for the current connection (see <a href="https://www.postgresql.org/docs/10/static/multibyte.html#CHARSET-TABLE">Table 23.1. PostgreSQL Character Sets</a> for possible values).</p><p>Currently all Julia connections are set to use <code>UTF8</code> as this makes conversion to and from <code>String</code> straighforward.</p><p>See also: <a href="api.html#LibPQ.set_encoding!-Tuple{LibPQ.Connection,String}"><code>set_encoding!</code></a>, <a href="api.html#LibPQ.reset_encoding!-Tuple{LibPQ.Connection}"><code>reset_encoding!</code></a></p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL187-L198">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.execute-Tuple{LibPQ.Connection,AbstractString,AbstractArray{#s208,1} where #s208&lt;:Union{Missings.Missing, String}}" href="#LibPQ.execute-Tuple{LibPQ.Connection,AbstractString,AbstractArray{#s208,1} where #s208&lt;:Union{Missings.Missing, String}}"><code>LibPQ.execute</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">execute(jl_conn::Connection, query::AbstractString, parameters::Vector{&lt;:Parameter}; throw_error=true) -&gt; Result</code></pre><p>Run a query on the PostgreSQL database and return a Result. If <code>throw_error</code> is <code>true</code>, throw an error and clear the result if the query results in a fatal error or unreadable response.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL576-L582">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.execute-Tuple{LibPQ.Connection,AbstractString}" href="#LibPQ.execute-Tuple{LibPQ.Connection,AbstractString}"><code>LibPQ.execute</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">execute(jl_conn::Connection, query::AbstractString; throw_error=true) -&gt; Result</code></pre><p>Run a query on the PostgreSQL database and return a Result. If <code>throw_error</code> is <code>true</code>, throw an error and clear the result if the query results in a fatal error or unreadable response.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL562-L568">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.execute-Tuple{LibPQ.Statement,AbstractArray{#s1,1} where #s1&lt;:Union{Missings.Missing, String}}" href="#LibPQ.execute-Tuple{LibPQ.Statement,AbstractArray{#s1,1} where #s1&lt;:Union{Missings.Missing, String}}"><code>LibPQ.execute</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">execute(stmt::Statement, parameters::Vector{&lt;:Parameter}; throw_error=true) -&gt; Result</code></pre><p>Execute a prepared statement on the PostgreSQL database and return a Result. If <code>throw_error</code> is <code>true</code>, throw an error and clear the result if the query results in a fatal error or unreadable response.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL782-L788">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.num_columns-Tuple{LibPQ.Result}" href="#LibPQ.num_columns-Tuple{LibPQ.Result}"><code>LibPQ.num_columns</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">num_columns(jl_result::Result) -&gt; Int</code></pre><p>Return the number of columns in the query result. This will be 0 if the query would never return data.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL640-L645">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.num_columns-Tuple{LibPQ.Statement}" href="#LibPQ.num_columns-Tuple{LibPQ.Statement}"><code>LibPQ.num_columns</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">num_columns(stmt::Statement) -&gt; Int</code></pre><p>Return the number of columns that would be returned by executing the prepared statement.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL747-L751">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.num_params-Tuple{LibPQ.Result}" href="#LibPQ.num_params-Tuple{LibPQ.Result}"><code>LibPQ.num_params</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">num_params(jl_result::Result) -&gt; Int</code></pre><p>Return the number of parameters in a prepared statement. If this result did not come from the description of a prepared statement, return 0.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL618-L623">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.num_params-Tuple{LibPQ.Statement}" href="#LibPQ.num_params-Tuple{LibPQ.Statement}"><code>LibPQ.num_params</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">num_params(stmt::Statement) -&gt; Int</code></pre><p>Return the number of parameters in the prepared statement.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL740-L744">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.num_rows-Tuple{LibPQ.Result}" href="#LibPQ.num_rows-Tuple{LibPQ.Result}"><code>LibPQ.num_rows</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">num_rows(jl_result::Result) -&gt; Int</code></pre><p>Return the number of rows in the query result. This will be 0 if the query would never return data.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL629-L634">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.reset!-Tuple{LibPQ.Connection}" href="#LibPQ.reset!-Tuple{LibPQ.Connection}"><code>LibPQ.reset!</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">reset!(jl_conn::Connection; throw_error=true)</code></pre><p>Reset the communication to the PostgreSQL server. The <code>PGconn</code> object will be recreated using identical connection parameters.</p><p>See <a href="api.html#LibPQ.handle_new_connection-Tuple{LibPQ.Connection}"><code>handle_new_connection</code></a> for information on the <code>throw_error</code> argument.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>This function can be called on a connection with status <code>CONNECTION_BAD</code>, for example, but cannot be called on a connection that has been closed.</p></div></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL301-L313">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.reset_encoding!-Tuple{LibPQ.Connection}" href="#LibPQ.reset_encoding!-Tuple{LibPQ.Connection}"><code>LibPQ.reset_encoding!</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">reset_encoding!(jl_conn::Connection, encoding::String)</code></pre><p>Reset the client encoding for the current connection to <code>jl_conn.encoding</code>.</p><p>See also: <a href="api.html#LibPQ.encoding-Tuple{LibPQ.Connection}"><code>encoding</code></a>, <a href="api.html#LibPQ.set_encoding!-Tuple{LibPQ.Connection,String}"><code>set_encoding!</code></a></p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL234-L240">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.server_version-Tuple{LibPQ.Connection}" href="#LibPQ.server_version-Tuple{LibPQ.Connection}"><code>LibPQ.server_version</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">server_version(jl_conn::Connection) -&gt; VersionNumber</code></pre><p>Get the PostgreSQL version of the server.</p><p>See <a href="https://www.postgresql.org/docs/10/static/libpq-status.html#LIBPQ-PQSERVERVERSION">33.2. Connection Status Functions</a> for information on the integer returned by <code>PQserverVersion</code> that is parsed by this function.</p><p>See <a href="api.html#LibPQ.@pqv_str-Tuple{Any}"><code>@pqv_str</code></a> for information on how this packages represents PostgreSQL version numbers.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL103-L114">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.set_encoding!-Tuple{LibPQ.Connection,String}" href="#LibPQ.set_encoding!-Tuple{LibPQ.Connection,String}"><code>LibPQ.set_encoding!</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">set_encoding!(jl_conn::Connection, encoding::String)</code></pre><p>Set the client encoding for the current connection (see <a href="https://www.postgresql.org/docs/10/static/multibyte.html#CHARSET-TABLE">Table 23.1. PostgreSQL Character Sets</a> for possible values).</p><p>Currently all Julia connections are set to use <code>UTF8</code> as this makes conversion to and from <code>String</code> straighforward. Other encodings are not explicitly handled by this package and will probably be very buggy.</p><p>See also: <a href="api.html#LibPQ.encoding-Tuple{LibPQ.Connection}"><code>encoding</code></a>, <a href="api.html#LibPQ.reset_encoding!-Tuple{LibPQ.Connection}"><code>reset_encoding!</code></a></p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL209-L221">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.status-Tuple{LibPQ.Connection}" href="#LibPQ.status-Tuple{LibPQ.Connection}"><code>LibPQ.status</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">status(jl_conn::Connection) -&gt; libpq_c.ConnStatusType</code></pre><p>Return the status of the PostgreSQL database connection according to libpq. Only <code>CONNECTION_OK</code> and <code>CONNECTION_BAD</code> are valid for blocking connections, and only blocking connections are supported right now.</p><p>See also: <a href="api.html#LibPQ.error_message-Tuple{LibPQ.Connection}"><code>error_message</code></a></p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL257-L265">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.status-Tuple{LibPQ.Result}" href="#LibPQ.status-Tuple{LibPQ.Result}"><code>LibPQ.status</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">status(jl_result::Result) -&gt; libpq_c.ExecStatusType</code></pre><p>Return the status of a result&#39;s corresponding database query according to libpq. Only <code>CONNECTION_OK</code> and <code>CONNECTION_BAD</code> are valid for blocking connections, and only blocking connections are supported right now.</p><p>See also: <a href="api.html#LibPQ.error_message-Tuple{LibPQ.Connection}"><code>error_message</code></a></p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL491-L499">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.@pqv_str-Tuple{Any}" href="#LibPQ.@pqv_str-Tuple{Any}"><code>LibPQ.@pqv_str</code></a> — <span class="docstring-category">Macro</span>.</div><div><pre><code class="language-none">@pqv_str -&gt; VersionNumber</code></pre><p>Parse a PostgreSQL version.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>As of version 10.0, PostgreSQL moved from a three-part version number (where the first two parts represent the major version and the third represents the minor version) to a two-part major-minor version number. In LibPQ.jl, we represent this using the first two <code>VersionNumber</code> components as the major version and the third as the minor version.</p><h2>Examples</h2><pre><code class="language-julia-repl">julia&gt; pqv&quot;10.1&quot; == v&quot;10.0.1&quot;
true

julia&gt; pqv&quot;9.2.5&quot; == v&quot;9.2.5&quot;
true</code></pre></div></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL130-L152">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.Statement-Tuple{DataStreams.Data.Schema,Type{DataStreams.Data.Row},Bool,LibPQ.Connection,AbstractString}" href="#LibPQ.Statement-Tuple{DataStreams.Data.Schema,Type{DataStreams.Data.Row},Bool,LibPQ.Connection,AbstractString}"><code>LibPQ.Statement</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">Statement(sch::Data.Schema, ::Type{Data.Row}, append, connection::Connection, query::AbstractString) -&gt; Statement</code></pre><p>Construct a <code>Statement</code> for use in streaming with DataStreams. This function is called by <code>Data.stream!(source, Statement, connection, query)</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/datastreams.jl#LL57-L62">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.fetch!-Tuple{Any,LibPQ.Result,Vararg{Any,N} where N}" href="#LibPQ.fetch!-Tuple{Any,LibPQ.Result,Vararg{Any,N} where N}"><code>LibPQ.fetch!</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">fetch!(sink::Union{T, Type{T}}, result::Result, args...; kwargs...) where {T} -&gt; T</code></pre><p>Stream data to <code>sink</code> or a new structure of type T using <a href="https://juliadata.github.io/DataStreams.jl/stable/#Data.stream!-1"><code>Data.stream!</code></a>. Any trailing <code>args</code> or <code>kwargs</code> are passed to <code>Data.stream!</code>. <code>result</code> is cleared upon completion.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/datastreams.jl#LL99-L105">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.ConnectionOption" href="#LibPQ.ConnectionOption"><code>LibPQ.ConnectionOption</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">struct ConnectionOption</code></pre><p>A Julia representation of a PostgreSQL connection option (<code>PQconninfoOption</code>).</p><p><strong>Fields:</strong></p><ul><li><p><code>keyword</code></p><p>The name of the option</p></li><li><p><code>envvar</code></p><p>The name of the fallback environment variable for this option</p></li><li><p><code>compiled</code></p><p>The PostgreSQL compiled-in default for this option</p></li><li><p><code>val</code></p><p>The value of the option if set</p></li><li><p><code>label</code></p><p>The label of the option for display</p></li><li><p><code>disptype</code></p><p>Indicator for how to display the option (see <a href="api.html#LibPQ.ConninfoDisplay"><code>ConninfoDisplay</code></a>)</p></li><li><p><code>dispsize</code></p><p>The size of field to provide for entry of the option value (not used here)</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL361-L369">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.ConnectionOption-Tuple{LibPQ.libpq_c.PQconninfoOption}" href="#LibPQ.ConnectionOption-Tuple{LibPQ.libpq_c.PQconninfoOption}"><code>LibPQ.ConnectionOption</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">ConnectionOption(pq_opt::libpq_c.PQconninfoOption) -&gt; ConnectionOption</code></pre><p>Construct a <code>ConnectionOption</code> from a <code>libpg_c.PQconninfoOption</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL385-L389">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.ConninfoDisplay" href="#LibPQ.ConninfoDisplay"><code>LibPQ.ConninfoDisplay</code></a> — <span class="docstring-category">Type</span>.</div><div><p>Indicator for how to display a PostgreSQL connection option (<code>PQconninfoOption</code>).</p><p>Possible values are:</p><ul><li><p><code>Normal</code> (libpq: &quot;&quot;): display as is</p></li><li><p><code>Password</code> (libpq: &quot;*&quot;): hide the value of this field</p></li><li><p><code>Debug</code> (libpq: &quot;D&quot;): don&#39;t show by default</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL333-L341">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.Distributed.clear!-Tuple{LibPQ.Result}" href="#Base.Distributed.clear!-Tuple{LibPQ.Result}"><code>Base.Distributed.clear!</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">clear!(jl_result::Result)</code></pre><p>Clean up the memory used by the <code>PGresult</code> object. The <code>Result</code> will no longer be usable.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL513-L518">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.close-Tuple{LibPQ.Connection}" href="#Base.close-Tuple{LibPQ.Connection}"><code>Base.close</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">close(jl_conn::Connection)</code></pre><p>Close the PostgreSQL database connection and free the memory used by the <code>PGconn</code> object. This function calls <a href="https://www.postgresql.org/docs/10/static/libpq-connect.html#LIBPQ-PQFINISH"><code>PQfinish</code></a>, but only if <code>jl_conn.closed</code> is <code>false</code>, to avoid a double-free.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL277-L283">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.isopen-Tuple{LibPQ.Connection}" href="#Base.isopen-Tuple{LibPQ.Connection}"><code>Base.isopen</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">isopen(jl_conn::Connection) -&gt; Bool</code></pre><p>Check whether a connection is open</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL294-L298">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.parse-Tuple{Type{LibPQ.ConninfoDisplay},AbstractString}" href="#Base.parse-Tuple{Type{LibPQ.ConninfoDisplay},AbstractString}"><code>Base.parse</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">parse(::Type{ConninfoDisplay}, str::AbstractString) -&gt; ConninfoDisplay</code></pre><p>Parse a <code>ConninfoDisplay</code> from a string. See <a href="api.html#LibPQ.ConninfoDisplay"><code>ConninfoDisplay</code></a>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL344-L348">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.show-Tuple{IO,LibPQ.Connection}" href="#Base.show-Tuple{IO,LibPQ.Connection}"><code>Base.show</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">show(io::IO, jl_conn::Connection)</code></pre><p>Display a <a href="api.html#LibPQ.Connection"><code>Connection</code></a> by showing the connection status and each connection option.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL431-L435">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.show-Tuple{IO,LibPQ.Result}" href="#Base.show-Tuple{IO,LibPQ.Result}"><code>Base.show</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">show(io::IO, jl_result::Result)</code></pre><p>Show a PostgreSQL result and whether it has been cleared.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL471-L475">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.conninfo-Tuple{LibPQ.Connection}" href="#LibPQ.conninfo-Tuple{LibPQ.Connection}"><code>LibPQ.conninfo</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">conninfo(jl_conn::Connection) -&gt; Vector{ConnectionOption}</code></pre><p>Get all connection options for a connection.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL402-L406">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.error_message-Tuple{LibPQ.Connection}" href="#LibPQ.error_message-Tuple{LibPQ.Connection}"><code>LibPQ.error_message</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">error_message(jl_conn::Connection) -&gt; String</code></pre><p>Return the error message most recently generated by an operation on the connection. Includes a trailing newline.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL325-L330">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.error_message-Tuple{LibPQ.Result}" href="#LibPQ.error_message-Tuple{LibPQ.Result}"><code>LibPQ.error_message</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">error_message(jl_result::Result) -&gt; String</code></pre><p>Return the error message associated with the result, or an empty string if there was no error. Includes a trailing newline.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL502-L508">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.handle_new_connection-Tuple{LibPQ.Connection}" href="#LibPQ.handle_new_connection-Tuple{LibPQ.Connection}"><code>LibPQ.handle_new_connection</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">handle_new_connection(jl_conn::Connection; throw_error=true) -&gt; Connection</code></pre><p>Check status and handle errors for newly-created connections. Also set the client encoding (<a href="https://www.postgresql.org/docs/10/static/multibyte.html">23.3. Character Set Support</a>) to <code>jl_conn.encoding</code>.</p><p>If <code>throw_error</code> is <code>true</code>, an error will be thrown if the connection&#39;s status is <code>CONNECTION_BAD</code> and the PGconn object will be cleaned up. Otherwise, a warning will be shown and the user should call <code>close</code> or <code>reset!</code> on the returned <code>Connection</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL58-L69">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.handle_result-Tuple{LibPQ.Result}" href="#LibPQ.handle_result-Tuple{LibPQ.Result}"><code>LibPQ.handle_result</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">handle_result(jl_result::Result; throw_error::Bool=true) -&gt; Result</code></pre><p>Check status and handle errors for newly-created result objects.</p><p>If <code>throw_error</code> is <code>true</code>, throw an error and clear the result if the query results in a fatal error or unreadable response. Otherwise a warning is shown.</p><p>Also print an info message about the result.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL529-L539">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.prepare-Tuple{LibPQ.Connection,AbstractString}" href="#LibPQ.prepare-Tuple{LibPQ.Connection,AbstractString}"><code>LibPQ.prepare</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">prepare(jl_conn::Connection, query::AbstractString) -&gt; Statement</code></pre><p>Create a prepared statement on the PostgreSQL server using libpq. The statement is given an generated unique name using <a href="api.html#LibPQ.unique_id"><code>unique_id</code></a>.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>Currently the statement is not explicitly deallocated, but it is deallocated at the end of session per the <a href="https://www.postgresql.org/docs/10/static/sql-deallocate.html">PostgreSQL documentation on DEALLOCATE</a>.</p></div></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL702-L712">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.transaction_status-Tuple{LibPQ.Connection}" href="#LibPQ.transaction_status-Tuple{LibPQ.Connection}"><code>LibPQ.transaction_status</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">transaction_status(jl_conn::Connection) -&gt; libpq_c.PGTransactionStatusType</code></pre><p>Return the PostgreSQL database server&#39;s current in-transaction status for the connection. See <a href="https://www.postgresql.org/docs/10/static/libpq-status.html#LIBPQ-PQTRANSACTIONSTATUS"></a> for information on the meaning of the possible return values.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL268-L274">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.unique_id" href="#LibPQ.unique_id"><code>LibPQ.unique_id</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">unique_id(jl_conn::Connection, prefix::AbstractString=&quot;&quot;) -&gt; String</code></pre><p>Return a valid PostgreSQL identifier that is unique for the current connection. This is mostly used to create names for prepared statements.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/LibPQ.jl#LL245-L250">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.unsafe_string_or_null-Tuple{Cstring}" href="#LibPQ.unsafe_string_or_null-Tuple{Cstring}"><code>LibPQ.unsafe_string_or_null</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">unsafe_string_or_null(ptr::Cstring) -&gt; Union{String, Missing}</code></pre><p>Convert a <code>Cstring</code> to a <code>Union{String, Missing}</code>, returning <code>missing</code> if the pointer is <code>C_NULL</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/2f2e57d878f2efd86313c7019791f010e817b376/src/utils.jl#LL1-L6">source</a></section><footer><hr/><a class="previous" href="../index.html"><span class="direction">Previous</span><span class="title">Home</span></a></footer></article></body></html>
