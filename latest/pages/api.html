<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · LibPQ.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>LibPQ.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Home</a></li><li class="current"><a class="toctext" href="api.html">API</a><ul class="internal"></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="api.html">API</a></li></ul><a class="edit-page" href="https://github.com/iamed2/LibPQ.jl/blob/master/docs/src/pages/api.md#L{line}"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>API</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="LibPQ-API-1" href="#LibPQ-API-1">LibPQ API</a></h1><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.Connection" href="#LibPQ.Connection"><code>LibPQ.Connection</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">type Connection</code></pre><p>A connection to a PostgreSQL database.</p><p><strong>Fields:</strong></p><ul><li><p><code>conn</code></p><p>A pointer to a libpq PGconn object (C_NULL if closed)</p></li><li><p><code>closed</code></p><p>True if the connection is closed and the PGconn object has been cleaned up</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL32-L40">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.Connection-Tuple{AbstractString}" href="#LibPQ.Connection-Tuple{AbstractString}"><code>LibPQ.Connection</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">Connection(str::AbstractString; throw_error=true) -&gt; Connection</code></pre><p>Create a <code>Connection</code> from a connection string as specified in the PostgreSQL documentation (<a href="https://www.postgresql.org/docs/10/static/libpq-connect.html#LIBPQ-CONNSTRING">33.1.1. Connection Strings</a>). If <code>throw_error</code> is <code>true</code>, an error will be thrown if the resulting connection&#39;s status is <code>CONNECTION_BAD</code> and the PGconn object will be cleaned up. Otherwise, a warning will be shown and the user should call <code>close</code> or <code>reset!</code> on the returned <code>Connection</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL41-L50">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.clear-Tuple{LibPQ.Result}" href="#LibPQ.clear-Tuple{LibPQ.Result}"><code>LibPQ.clear</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">clear(jl_result::Result)</code></pre><p>Clean up the memory used by the <code>PGresult</code> object. The <code>Result</code> will no longer be usable.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL315-L320">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.execute-Tuple{LibPQ.Connection,AbstractString}" href="#LibPQ.execute-Tuple{LibPQ.Connection,AbstractString}"><code>LibPQ.execute</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">execute(jl_conn::Connection, query::AbstractString; throw_error=false) -&gt; Result</code></pre><p>Run a query on the PostgreSQL database and return a Result. If <code>throw_error</code> is <code>true</code>, throw an error and clear the result if the query results in a fatal error or unreadable response.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL331-L337">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.status-Tuple{LibPQ.Connection}" href="#LibPQ.status-Tuple{LibPQ.Connection}"><code>LibPQ.status</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">status(jl_conn::Connection) -&gt; libpq_c.ConnStatusType</code></pre><p>Return the status of the PostgreSQL database connection according to libpq. Only <code>CONNECTION_OK</code> and <code>CONNECTION_BAD</code> are valid for blocking connections, and only blocking connections are supported right now.</p><p>See also: <a href="api.html#LibPQ.error_message-Tuple{LibPQ.Connection}"><code>error_message</code></a></p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL68-L76">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.status-Tuple{LibPQ.Result}" href="#LibPQ.status-Tuple{LibPQ.Result}"><code>LibPQ.status</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">status(jl_result::Result) -&gt; libpq_c.ExecStatusType</code></pre><p>Return the status of a result&#39;s corresponding database query according to libpq. Only <code>CONNECTION_OK</code> and <code>CONNECTION_BAD</code> are valid for blocking connections, and only blocking connections are supported right now.</p><p>See also: <a href="api.html#LibPQ.error_message-Tuple{LibPQ.Connection}"><code>error_message</code></a></p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL293-L301">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.ConnectionOption" href="#LibPQ.ConnectionOption"><code>LibPQ.ConnectionOption</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">struct ConnectionOption</code></pre><p>A Julia representation of a PostgreSQL connection option (<code>PQconninfoOption</code>).</p><p><strong>Fields:</strong></p><ul><li><p><code>keyword</code></p><p>The name of the option</p></li><li><p><code>envvar</code></p><p>The name of the fallback environment variable for this option</p></li><li><p><code>compiled</code></p><p>The PostgreSQL compiled-in default for this option</p></li><li><p><code>val</code></p><p>The value of the option if set</p></li><li><p><code>label</code></p><p>The label of the option for display</p></li><li><p><code>disptype</code></p><p>Indicator for how to display the option (see <a href="api.html#LibPQ.ConninfoDisplay"><code>ConninfoDisplay</code></a>)</p></li><li><p><code>dispsize</code></p><p>The size of field to provide for entry of the option value (not used here)</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL165-L173">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.ConnectionOption-Tuple{LibPQ.libpq_c.PQconninfoOption}" href="#LibPQ.ConnectionOption-Tuple{LibPQ.libpq_c.PQconninfoOption}"><code>LibPQ.ConnectionOption</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">ConnectionOption(pq_opt::libpq_c.PQconninfoOption) -&gt; ConnectionOption</code></pre><p>Construct a <code>ConnectionOption</code> from a <code>libpg_c.PQconninfoOption</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL189-L193">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.ConninfoDisplay" href="#LibPQ.ConninfoDisplay"><code>LibPQ.ConninfoDisplay</code></a> — <span class="docstring-category">Type</span>.</div><div><p>Indicator for how to display a PostgreSQL connection option (<code>PQconninfoOption</code>).</p><p>Possible values are:</p><ul><li><p><code>Normal</code> (libpq: &quot;&quot;): display as is</p></li><li><p><code>Password</code> (libpq: &quot;*&quot;): hide the value of this field</p></li><li><p><code>Debug</code> (libpq: &quot;D&quot;): don&#39;t show by default</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL137-L145">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.Result" href="#LibPQ.Result"><code>LibPQ.Result</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">type Result &lt;: DataStreams.Data.Source</code></pre><p>A result from a PostgreSQL database query</p><p><strong>Fields:</strong></p><ul><li><p><code>result</code></p><p>A pointer to a libpq PGresult object (C_NULL if cleared)</p></li><li><p><code>cleared</code></p><p>True if the PGresult object has been cleaned up</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL264-L272">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.Result-Tuple{Ptr{Void}}" href="#LibPQ.Result-Tuple{Ptr{Void}}"><code>LibPQ.Result</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">Result(result::Ptr{libpq_c.PGresult}) -&gt; Result</code></pre><p>Construct a <code>Result</code> from a <code>libpg_c.PGresult</code></p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL286-L290">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.close-Tuple{LibPQ.Connection}" href="#Base.close-Tuple{LibPQ.Connection}"><code>Base.close</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">close(jl_conn::Connection)</code></pre><p>Close the PostgreSQL database connection and free the memory used by the <code>PGconn</code> object. This function calls <a href="https://www.postgresql.org/docs/10/static/libpq-connect.html#LIBPQ-PQFINISH"><code>PQfinish</code></a>, but only if <code>jl_conn.closed</code> is <code>false</code>, to avoid a double-free.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL79-L85">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.parse-Tuple{Type{LibPQ.ConninfoDisplay},AbstractString}" href="#Base.parse-Tuple{Type{LibPQ.ConninfoDisplay},AbstractString}"><code>Base.parse</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">parse(::Type{ConninfoDisplay}, str::AbstractString) -&gt; ConninfoDisplay</code></pre><p>Parse a <code>ConninfoDisplay</code> from a string. See <a href="api.html#LibPQ.ConninfoDisplay"><code>ConninfoDisplay</code></a>.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL148-L152">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.show-Tuple{IO,LibPQ.Connection}" href="#Base.show-Tuple{IO,LibPQ.Connection}"><code>Base.show</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">show(io::IO, jl_conn::Connection)</code></pre><p>Display a <a href="api.html#LibPQ.Connection"><code>Connection</code></a> by showing the connection status and each connection option.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL235-L239">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.show-Tuple{IO,LibPQ.Result}" href="#Base.show-Tuple{IO,LibPQ.Result}"><code>Base.show</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">show(io::IO, jl_result::Result)</code></pre><p>Show a PostgreSQL result and whether it has been cleared.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL273-L277">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.column_name-Tuple{LibPQ.Result,Integer}" href="#LibPQ.column_name-Tuple{LibPQ.Result,Integer}"><code>LibPQ.column_name</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">column_name(jl_result::Result, column_number::Integer) -&gt; String</code></pre><p>Return the name of the column at index <code>column_number</code> (1-based).</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL383-L387">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.column_names-Tuple{LibPQ.Result}" href="#LibPQ.column_names-Tuple{LibPQ.Result}"><code>LibPQ.column_names</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">column_names(jl_result::Result, column_number::Integer) -&gt; Vector{String}</code></pre><p>Return the names of all the columns in the query result.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL393-L397">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.column_number-Tuple{LibPQ.Result,AbstractString}" href="#LibPQ.column_number-Tuple{LibPQ.Result,AbstractString}"><code>LibPQ.column_number</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">column_number(jl_result::Result, column_name::AbstractString) -&gt; Int</code></pre><p>Return the index (1-based) of the column named <code>column_name</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL402-L406">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.conninfo-Tuple{LibPQ.Connection}" href="#LibPQ.conninfo-Tuple{LibPQ.Connection}"><code>LibPQ.conninfo</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">conninfo(jl_conn::Connection) -&gt; Vector{ConnectionOption}</code></pre><p>Get all connection options for a connection.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL206-L210">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.error_message-Tuple{LibPQ.Connection}" href="#LibPQ.error_message-Tuple{LibPQ.Connection}"><code>LibPQ.error_message</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">error_message(jl_conn::Connection) -&gt; String</code></pre><p>Return the error message most recently generated by an operation on the connection. Includes a trailing newline.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL129-L134">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.error_message-Tuple{LibPQ.Result}" href="#LibPQ.error_message-Tuple{LibPQ.Result}"><code>LibPQ.error_message</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">error_message(jl_result::Result) -&gt; String</code></pre><p>Return the error message associated with the result, or an empty string if there was no error. Includes a trailing newline.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL304-L310">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.num_columns-Tuple{LibPQ.Result}" href="#LibPQ.num_columns-Tuple{LibPQ.Result}"><code>LibPQ.num_columns</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">num_columns(jl_result::Result) -&gt; Int</code></pre><p>Return the number of columns in the query result. This will be 0 if the query would never return data.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL372-L377">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.num_rows-Tuple{LibPQ.Result}" href="#LibPQ.num_rows-Tuple{LibPQ.Result}"><code>LibPQ.num_rows</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">num_rows(jl_result::Result) -&gt; Int</code></pre><p>Return the number of rows in the query result. This will be 0 if the query would never return data.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL361-L366">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.reset!-Tuple{LibPQ.Connection}" href="#LibPQ.reset!-Tuple{LibPQ.Connection}"><code>LibPQ.reset!</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">reset!(jl_conn::Connection; throw_error=true)</code></pre><p>Reset the communication to the PostgreSQL server. The <code>PGconn</code> object will be recreated using identical connection parameters. The <code>throw_error</code> parameter functions as in <a href="api.html#LibPQ.Connection"><code>Connection</code></a>.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>This function can be called on a connection with status <code>CONNECTION_BAD</code>, for example, but cannot be called on a connection that has been closed.</p></div></div></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/LibPQ.jl#LL96-L107">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.unsafe_nullable_string-Tuple{Cstring}" href="#LibPQ.unsafe_nullable_string-Tuple{Cstring}"><code>LibPQ.unsafe_nullable_string</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">unsafe_nullable_string(ptr::Cstring) -&gt; Nullable{String}</code></pre><p>Convert a <code>Cstring</code> to a <code>Nullable{String}</code>, returning <code>Nullable{String}()</code> if the pointer is <code>C_NULL</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/iamed2/LibPQ.jl/blob/b7c963e93e253a808bf254e744088805282e96cb/src/utils.jl#LL1-L6">source</a></section><footer><hr/><a class="previous" href="../index.html"><span class="direction">Previous</span><span class="title">Home</span></a></footer></article></body></html>
